<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø·</title>

<style>
body{font-family:Arial;background:#0f172a;color:#fff;padding:20px}
.card{background:#1e293b;margin:15px 0;padding:15px;border-radius:12px}
button{background:#22c55e;border:none;color:black;padding:10px 15px;border-radius:10px;font-size:16px;cursor:pointer;margin:4px}
.danger{background:#ef4444}
.reward{background:#38bdf8}
.logout{background:#ef4444;color:black;margin-top:10px}
.score{font-size:32px;color:#facc15;text-align:center}
.hidden{display:none}
input{width:100%;padding:10px;border-radius:10px;border:none;margin:10px 0}
</style>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>

<body>

<!-- ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
<div id="loginCard" class="card">
  <h2>ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
  <input id="username" placeholder="Ù…Ø­Ù…Ø¯ Ø§Ù„Ø®ÙŠØ± Ø£Ùˆ Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠØ§Ù†">
  <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
</div>

<!-- Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ -->
<div id="app" class="hidden">

<h1>ğŸ¯ Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø·</h1>
<div class="score" id="score">0 Ù†Ù‚Ø·Ø©</div>

<div class="card" id="positiveCard">
  <h2>âœ… Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ©</h2>
  <button onclick="add(25)">ÙƒÙ„ ØµÙ„Ø§Ø© (+25)</button>
  <button onclick="add(60)">Ø¬Ù„Ø³Ø© Ø¯Ø±Ø§Ø³Ø© (+60)</button>
  <button onclick="add(50)">Ø±ÙŠØ§Ø¶Ø© (+50)</button>
  <button onclick="add(150)">Ø¥Ù†Ø¬Ø§Ø² 80% (+150)</button>
  <button onclick="add(40)">Ø¯Ø±Ø§Ø³Ø© Ù…Ø³Ø§Ø¦ÙŠØ© (+40)</button>
  <button id="readBtn" onclick="add(25)">Ù‚Ø±Ø§Ø¡Ø© 30 Ø¯Ù‚ÙŠÙ‚Ø© (+25)</button>
  <button onclick="add(20)">Ù…Ø±Ø§Ø¬Ø¹Ø© Ø³Ø±ÙŠØ¹Ø© (+20)</button>
  <button onclick="add(15)">ØªØ±ØªÙŠØ¨ Ø§Ù„ØºØ±ÙØ© (+15)</button>
  <button onclick="add(15)">ØºØ³Ù„ Ø§Ù„Ø£ÙˆØ§Ù†ÙŠ (+15)</button>
</div>

<div class="card">
  <h2>âŒ Ø§Ù„Ø¹Ø§Ø¯Ø§Øª Ø§Ù„Ø³ÙŠØ¦Ø©</h2>
  <button class="danger" onclick="add(-150)">Ù‡Ø§ØªÙ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¯Ø±Ø§Ø³Ø© (-150)</button>
  <button class="danger" onclick="add(-100)">ØªØ£Ø®ÙŠØ± Ø§Ù„ØµÙ„Ø§Ø© (-100)</button>
  <button class="danger" onclick="add(-100)">Ø±Ø§Ø­Ø© Ø·ÙˆÙŠÙ„Ø© (-100)</button>
  <button class="danger" onclick="add(-75)">Ù†ÙˆÙ… Ù…ØªØ£Ø®Ø± (-75)</button>
  <button class="danger" onclick="add(-60)">Ø¥Ù‡Ù…Ø§Ù„ Ø§Ù„ØªØ±ØªÙŠØ¨ (-60)</button>
  <button class="danger" onclick="add(-130)">Ø¹Ø§Ø¯Ø© Ø³ÙŠØ¦Ø© (-130)</button>
  <button class="danger" onclick="add(-70)">Ù…Ù…Ø§Ø·Ù„Ø© (-70)</button>
</div>

<div class="card" id="rewardsCard">
  <h2>ğŸ Ù…ØªØ¬Ø± Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª</h2>
  <button class="reward" onclick="redeem(40)">15 Ø¯Ù‚ÙŠÙ‚Ø© Ù‡Ø§ØªÙ (-40)</button>
  <button class="reward" onclick="redeem(75)">30 Ø¯Ù‚ÙŠÙ‚Ø© Ù‡Ø§ØªÙ (-75)</button>
  <button class="reward" onclick="redeem(150)">Ø±Ø­Ù„Ø© Ù‚ØµÙŠØ±Ø© (-150)</button>
  <button class="reward" onclick="redeem(200)">ÙˆØ¬Ø¨Ø© Ø®Ø§Ø±Ø¬ÙŠØ© (-200)</button>
  <button class="reward" onclick="redeem(300)">Ù…Ø´Ø§Ù‡Ø¯Ø© ÙÙŠÙ„Ù… (-300)</button>
  <button id="readReward" class="reward" onclick="redeem(120)">Ù‚Ø±Ø§Ø¡Ø© ÙƒØªØ§Ø¨ (-120)</button>
</div>

<!-- Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ -->
<button class="logout" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>

</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyB8VgV7TLZv5nYS7GQE1Z-oUg87BAnfrqk",
  authDomain: "points-system-fc43e.firebaseapp.com",
  databaseURL: "https://points-system-fc43e-default-rtdb.firebaseio.com/",
  projectId: "points-system-fc43e",
  storageBucket: "points-system-fc43e.appspot.com",
  messagingSenderId: "753175770984",
  appId: "1:753175770984:web:6045f321d4a869f19008dd"
};
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let currentUser = "";
let score = 0;

// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
function login(){
  const name=document.getElementById("username").value.trim();
  if(name!=="Ù…Ø­Ù…Ø¯ Ø§Ù„Ø®ÙŠØ±" && name!=="Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠØ§Ù†"){
    alert("Ø§Ø³Ù… ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­");
    return;
  }
  currentUser=name;
  document.getElementById("loginCard").classList.add("hidden");
  document.getElementById("app").classList.remove("hidden");

  // ØªØ®ØµÙŠØµ Ù„Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠØ§Ù†
  if(currentUser==="Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠØ§Ù†"){
    document.getElementById("readReward").style.display="none";
  }

  loadScore();
}

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø§Ø·
function loadScore(){
  db.ref("users/"+currentUser).on("value",snap=>{
    score=snap.val()||0;
    update();
  });
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
  function update(){
  document.getElementById("score").innerText=score+" Ù†Ù‚Ø·Ø©";
}

// Ø¥Ø¶Ø§ÙØ© Ù†Ù‚Ø§Ø· / Ø®ØµÙ…
function add(points){
  score+=points;
  db.ref("users/"+currentUser).set(score);
}

// Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ù…ÙƒØ§ÙØ¢Øª
function redeem(cost){
  if(score>=cost){
    score-=cost;
    db.ref("users/"+currentUser).set(score);
    alert("âœ… ØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©");
  }else{
    alert("âŒ Ù†Ù‚Ø§Ø· ØºÙŠØ± ÙƒØ§ÙÙŠØ©");
  }
}

// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
function logout(){
  currentUser="";
  score=0;
  document.getElementById("app").classList.add("hidden");
  document.getElementById("loginCard").classList.remove("hidden");
  document.getElementById("username").value="";
  document.getElementById("score").innerText="0 Ù†Ù‚Ø·Ø©";
}
</script>

</body>
</html>
